<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data Ingestion ‚Äî AI Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="{{ url_for('static', path='css/ingestion.css') }}">
</head>
<body class="bg-black text-white min-h-screen font-sans relative overflow-hidden">

  <div id="particles" aria-hidden="true"></div>

  <main id="main-content" class="relative z-10 flex flex-col items-center w-full py-12 px-6">

    <div class="w-11/12 max-w-7xl mb-10 flex items-center justify-between">
      <h1 class="text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-pink-500 drop-shadow-lg">
        Data Ingestion
      </h1>

      <div class="flex items-center gap-4">
        <a href="/"
           class="hidden md:inline-block px-4 py-2 rounded-2xl bg-gray-900/60 border border-gray-700 hover:border-cyan-400 transition focus:outline-none focus:ring-2 focus:ring-cyan-500"
           aria-label="Back to dashboard">
          ‚Üê Back
        </a>

        <button
          id="createVectorBtn"
          type="button"
          class="px-6 py-3 rounded-2xl font-semibold bg-gradient-to-r from-cyan-400 to-pink-500 text-black shadow-lg hover:scale-105 transition transform focus:outline-none focus:ring-2 focus:ring-cyan-500"
          aria-label="Create new vector store">
          + Create Vector Store
        </button>
      </div>
    </div>

    <div class="w-11/12 max-w-7xl">
      <div id="vectorStoreList"
           class="vector-store-grid"
           role="list"
           aria-label="Vector stores">
        <div id="noStores" class="empty-state text-center py-24 col-span-full">
          <div class="empty-icon" aria-hidden="true">üìö</div>
          <h2 class="empty-title">No Vector Stores Yet</h2>
          <p class="empty-description">
            Create your first vector store to start organizing and searching through your documents.
          </p>
        </div>
      </div>
    </div>
  </main>

  <div
    id="createVectorModal"
    class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4 overflow-y-auto"
    role="dialog"
    aria-modal="true"
    aria-labelledby="modal-title"
    aria-describedby="modal-description">

    <div class="w-full max-w-2xl bg-gray-900/90 rounded-3xl border border-gray-700 shadow-2xl relative my-8 max-h-[90vh] flex flex-col">

      <div class="p-8 pb-4 flex-shrink-0">
        <button
          id="closeModal"
          type="button"
          class="absolute right-4 top-4 w-10 h-10 flex items-center justify-center text-2xl text-gray-400 hover:text-cyan-300 hover:bg-gray-800 rounded-lg transition focus:outline-none focus:ring-2 focus:ring-cyan-500"
          aria-label="Close modal">
          &times;
        </button>

        <h2 id="modal-title" class="text-2xl font-semibold text-cyan-300 mb-2">
          Create Vector Store
        </h2>
        <p id="modal-description" class="text-gray-400 text-sm">
          Create a new vector store to organize and embed your documents for AI-powered search.
        </p>
      </div>

      <div class="px-8 overflow-y-auto flex-1">
        <form id="vectorStoreForm" class="grid grid-cols-1 md:grid-cols-2 gap-4 pb-4" novalidate>

          <div class="col-span-1 md:col-span-2">
            <label for="vectorName" class="block text-gray-300 mb-2 font-medium">
              Vector Store Name <span class="text-red-400" aria-label="required">*</span>
            </label>
            <input
              id="vectorName"
              name="vectorName"
              type="text"
              class="input-field"
              placeholder="e.g., knowledge-base"
              required
              aria-required="true"
              aria-describedby="vectorName-hint vectorName-error"
              aria-invalid="false">
            <p id="vectorName-hint" class="text-xs text-gray-400 mt-1">
              Use lowercase letters, numbers, and hyphens only
            </p>
            <p id="vectorName-error" class="text-red-400 text-sm mt-1 hidden" role="alert"></p>
          </div>

          <div>
            <label for="providerSelect" class="block text-gray-300 mb-2 font-medium">
              Provider <span class="text-red-400" aria-label="required">*</span>
            </label>
            <select
              id="providerSelect"
              name="provider"
              class="input-field"
              required
              aria-required="true"
              aria-describedby="providerSelect-error">
              <option value="">‚Äî Select provider ‚Äî</option>
            </select>
            <p id="providerSelect-error" class="text-red-400 text-sm mt-1 hidden" role="alert"></p>
          </div>

          <div>
            <label for="modelSelect" class="block text-gray-300 mb-2 font-medium">
              Embedding Model <span class="text-red-400" aria-label="required">*</span>
            </label>
            <select
              id="modelSelect"
              name="model"
              class="input-field"
              required
              aria-required="true"
              aria-describedby="modelSelect-error"
              disabled>
              <option value="">‚Äî Select provider first ‚Äî</option>
            </select>
            <p id="modelSelect-error" class="text-red-400 text-sm mt-1 hidden" role="alert"></p>
          </div>

          <div class="md:col-span-2">
            <label for="fileUpload" class="block text-gray-300 mb-2 font-medium">
              Upload Documents <span class="text-red-400" aria-label="required">*</span>
            </label>

            <div
              id="dropZone"
              class="border-2 border-dashed border-gray-600 rounded-xl p-8 text-center hover:border-cyan-400 transition cursor-pointer"
              role="button"
              tabindex="0"
              aria-describedby="fileUpload-hint fileUpload-error">
              <div class="text-4xl mb-3" aria-hidden="true">üìÅ</div>
              <p class="text-gray-300 mb-2">
                <span class="text-cyan-400 underline">Click to upload</span> or drag and drop
              </p>
              <p id="fileUpload-hint" class="text-sm text-gray-500">
                PDF, TXT, DOCX, DOC (Max 10 files, 50MB each)
              </p>
            </div>

            <input
              id="fileUpload"
              name="files"
              type="file"
              class="hidden"
              multiple
              accept=".pdf,.txt,.docx,.doc"
              required
              aria-required="true"
              aria-describedby="fileUpload-hint fileUpload-error">

            <p id="fileUpload-error" class="text-red-400 text-sm mt-2 hidden" role="alert"></p>

            <div id="fileList" class="mt-4 space-y-2 hidden">
              <p class="text-sm text-gray-400 font-medium">Selected Files:</p>
              <ul id="fileListItems" class="space-y-1" role="list"></ul>
            </div>
          </div>

          <div class="md:col-span-2">
            <label for="description" class="block text-gray-300 mb-2 font-medium">
              Description <span class="text-gray-500 text-sm">(Optional)</span>
            </label>
            <textarea
              id="description"
              name="description"
              class="input-field"
              rows="3"
              placeholder="Brief description of this vector store..."
              aria-describedby="description-hint"></textarea>
            <p id="description-hint" class="text-xs text-gray-400 mt-1">
              Help others understand the purpose of this vector store
            </p>
          </div>

          <div id="uploadProgress" class="md:col-span-2 hidden">
            <div class="bg-gray-800 rounded-lg p-4">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-gray-300">Uploading...</span>
                <span id="progressPercent" class="text-sm text-cyan-400">0%</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-2">
                <div
                  id="progressBar"
                  class="bg-gradient-to-r from-cyan-400 to-pink-500 h-2 rounded-full transition-all"
                  style="width: 0%"
                  role="progressbar"
                  aria-valuenow="0"
                  aria-valuemin="0"
                  aria-valuemax="100"></div>
              </div>
              <p id="uploadStatus" class="text-xs text-gray-400 mt-2" aria-live="polite"></p>
            </div>
          </div>
        </form>
      </div>

      <div class="p-8 pt-4 flex-shrink-0 border-t border-gray-700">
        <div class="flex justify-end gap-3">
          <button
            type="button"
            id="cancelCreate"
            class="px-4 py-2 rounded-xl bg-gray-700 hover:bg-gray-600 transition focus:outline-none focus:ring-2 focus:ring-gray-500">
            Cancel
          </button>
          <button
            type="submit"
            id="submitCreate"
            form="vectorStoreForm"
            class="px-6 py-2 rounded-2xl bg-gradient-to-r from-cyan-400 to-pink-500 text-black font-semibold hover:scale-105 transition focus:outline-none focus:ring-2 focus:ring-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100">
            Create Store
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', path='js/ingestion.js') }}"></script>
</body>
</html>
